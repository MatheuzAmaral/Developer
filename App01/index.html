<!DOCTYPE html>
<html lang="pt-BR">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0"/>
  <title>Agendamento - Sal√£o Feminino</title>
  <style>
    body {
      margin: 0;
      font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif;
      background: url('https://www.transparenttextures.com/patterns/flowers.png') repeat, #fdf1f5;
      color: #4a2c2a;
      display: flex;
      flex-direction: column;
      align-items: center;
      padding: 20px;
      background-size: auto;
    }

    h1 {
      color: #c84b8e;
    }

    .container {
      background-color: #ffffffdd;
      padding: 20px;
      border-radius: 12px;
      width: 100%;
      max-width: 400px;
      box-shadow: 0 0 10px rgba(0,0,0,0.1);
    }

    label {
      display: block;
      margin-top: 10px;
      color: #555;
      font-weight: 500;
    }

    input, select, button {
      width: 100%;
      padding: 10px;
      margin-top: 5px;
      border: 1px solid #ddd;
      border-radius: 6px;
      font-size: 1em;
    }

    button {
      background-color: #c84b8e;
      color: white;
      cursor: pointer;
      margin-top: 15px;
      transition: background-color 0.3s;
    }

    button:hover {
      background-color: #a83c74;
    }

    .mensagem {
      margin-top: 15px;
      background: #ffe0f0;
      color: #6b2c3a;
      padding: 10px;
      border-radius: 6px;
      display: none;
    }

    .valor {
      margin-top: 5px;
      font-weight: bold;
      color: #d66;
    }

    .admin-password {
      margin-top: 30px;
      background-color: #fff3f8;
      padding: 15px;
      border-radius: 10px;
      max-width: 400px;
      width: 100%;
    }

    .admin-panel {
      margin-top: 30px;
      background: #fff3f8;
      padding: 15px;
      border-radius: 10px;
      max-width: 500px;
      width: 100%;
      display: none;
    }

    .admin-panel h2 {
      color: #b03e72;
      margin-bottom: 10px;
    }

    table {
      width: 100%;
      border-collapse: collapse;
      margin-top: 10px;
    }

    th, td {
      border: 1px solid #bbb;
      padding: 8px;
      text-align: left;
      color: #444;
    }

    th {
      background-color: #fcd5e5;
    }

    @media (max-width: 480px) {
      .container, .admin-password, .admin-panel {
        padding: 15px;
        border-radius: 8px;
      }
    }
  </style>
</head>
<body>
  <h1>Agende seu hor√°rio</h1>
  <div class="container">
    <label for="nome">Nome:</label>
    <input type="text" id="nome" required />

    <label for="servico">Servi√ßo:</label>
    <select id="servico" onchange="mostrarValor()">
      <option value="Escova simples">Escova simples</option>
      <option value="Hidrata√ß√£o capilar">Hidrata√ß√£o capilar</option>
      <option value="Corte feminino">Corte feminino</option>
      <option value="Progressiva">Progressiva</option>
      <option value="Luzes">Luzes</option>
      <option value="Colora√ß√£o">Colora√ß√£o</option>
      <option value="Sobrancelha">Sobrancelha</option>
      <option value="Maquiagem">Maquiagem</option>
      <option value="Manicure e pedicure">Manicure e pedicure</option>
      <option value="Spa dos p√©s">Spa dos p√©s</option>
    </select>

    <div class="valor" id="valorServico"></div>

    <label for="data">Data:</label>
    <input type="date" id="data" required onchange="atualizarHorarios()" />

    <label for="hora">Hor√°rio:</label>
    <select id="hora" required></select>

    <button onclick="confirmarAgendamento()">Confirmar e Enviar via WhatsApp</button>

    <div class="mensagem" id="mensagem"></div>
  </div>

  <div class="admin-password">
    <label for="senhaAdmin">Senha Administrador:</label>
    <input type="password" id="senhaAdmin" placeholder="Digite a senha" />
    <button onclick="verificarSenha()">Entrar como Administrador</button>
  </div>

  <div class="admin-panel" id="painelAdmin">
    <h2>Agendamentos Salvos</h2>
    <table id="tabelaAgendamentos">
      <thead>
        <tr>
          <th>Nome</th>
          <th>Servi√ßo</th>
          <th>Data</th>
          <th>Hora</th>
        </tr>
      </thead>
      <tbody></tbody>
    </table>
  </div>

  <script>
    const horarioInicio = 9;
    const horarioFim = 18;
    const senhaCorreta = "1234";

    const precos = {
      "Escova simples": 40,
      "Hidrata√ß√£o capilar": 70,
      "Corte feminino": 50,
      "Progressiva": 200,
      "Luzes": 250,
      "Colora√ß√£o": 120,
      "Sobrancelha": 25,
      "Maquiagem": 100,
      "Manicure e pedicure": 60,
      "Spa dos p√©s": 80
    };

    function mostrarValor() {
      const servico = document.getElementById('servico').value;
      document.getElementById('valorServico').textContent = `Valor: R$ ${precos[servico].toFixed(2).replace('.', ',')}`;
    }

    function gerarHorariosDisponiveis(dataSelecionada) {
      const horarios = [];
      for (let h = horarioInicio; h < horarioFim; h++) {
        const horaStr = `${String(h).padStart(2, '0')}:00`;
        horarios.push(horaStr);
      }

      const agendamentos = JSON.parse(localStorage.getItem('agendamentos')) || [];
      const ocupados = agendamentos.filter(a => a.data === dataSelecionada).map(a => a.hora);

      return horarios.filter(hora => !ocupados.includes(hora));
    }

    function atualizarHorarios() {
      const data = document.getElementById('data').value;
      const selectHora = document.getElementById('hora');
      selectHora.innerHTML = '';

      if (!data) return;

      const disponiveis = gerarHorariosDisponiveis(data);
      if (disponiveis.length === 0) {
        const option = document.createElement('option');
        option.textContent = 'Sem hor√°rios dispon√≠veis';
        option.disabled = true;
        selectHora.appendChild(option);
      } else {
        disponiveis.forEach(hora => {
          const option = document.createElement('option');
          option.value = hora;
          option.textContent = hora;
          selectHora.appendChild(option);
        });
      }
    }

    function confirmarAgendamento() {
      const nome = document.getElementById('nome').value;
      const servico = document.getElementById('servico').value;
      const data = document.getElementById('data').value;
      const hora = document.getElementById('hora').value;
      const msg = document.getElementById('mensagem');

      if (nome && data && hora) {
        const agendamentos = JSON.parse(localStorage.getItem('agendamentos')) || [];
        agendamentos.push({ nome, servico, data, hora });
        localStorage.setItem('agendamentos', JSON.stringify(agendamentos));
        atualizarHorarios();

        const preco = precos[servico].toFixed(2).replace('.', ',');
        const texto = `üëã Ol√°, meu nome √© ${nome}!\n\nGostaria de agendar:\nüíá‚Äç‚ôÄÔ∏è ${servico}\nüìÖ ${data}\n‚è∞ ${hora}\nüí∞ R$ ${preco}\n\nAguardo a confirma√ß√£o. Obrigada! üíñ`;
        const numeroBarbearia = '5591999999999';
        const url = `https://wa.me/${numeroBarbearia}?text=${encodeURIComponent(texto)}`;
        window.open(url, '_blank');

        msg.style.display = 'block';
        msg.innerHTML = `Agendamento enviado para o WhatsApp!<br><strong>${nome}</strong> escolheu <strong>${servico}</strong> (R$ ${preco})<br>para o dia <strong>${data}</strong> √†s <strong>${hora}</strong>.`;
      } else {
        msg.style.display = 'block';
        msg.innerHTML = 'Por favor, preencha todos os campos corretamente.';
      }
    }

    function verificarSenha() {
      const senha = document.getElementById('senhaAdmin').value;
      if (senha === senhaCorreta) {
        mostrarAgendamentos();
        alert('Acesso autorizado!');
      } else {
        alert('Senha incorreta!');
      }
    }

    function mostrarAgendamentos() {
      const painel = document.getElementById("painelAdmin");
      const tabela = document.getElementById("tabelaAgendamentos").getElementsByTagName('tbody')[0];
      tabela.innerHTML = "";
      const agendamentos = JSON.parse(localStorage.getItem("agendamentos")) || [];

      agendamentos.forEach(ag => {
        const row = tabela.insertRow();
        row.innerHTML = `<td>${ag.nome}</td><td>${ag.servico}</td><td>${ag.data}</td><td>${ag.hora}</td>`;
      });

      painel.style.display = 'block';
    }

    window.onload = () => {
      const hoje = new Date().toISOString().split("T")[0];
      document.getElementById("data").setAttribute("min", hoje);
      mostrarValor();
    }
  </script>
</body>
</html>
